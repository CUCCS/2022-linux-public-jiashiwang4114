# 任务二-2：用bash编写一个文本批处理脚本，对以下附件分别进行批量处理完成相应的数据统计任务：(Web服务器访问日志)

## 统计访问来源主机TOP 100和分别对应出现的总次数

|host|count|
|:---:|:---:|
|www-c8.proxy.aol.com|995|
|ucpath17.med.uc.edu|99|
|tecnet1.jcte.jcs.mil|99|
|relay.tis.com|99|
|relay.eagle.co.nz|99|
|pslip016.ksc-fl.ids.net|99|
|progress.mit.edu|99|
|peg1-ts9.peganet.com|99|
|patos.mcca.ep.usp.br|99|
|marte.et6.tu-harburg.de|99|
|mac532-14.gsfc.nasa.gov|99|
|ives.colorado.edu|99|
|ist-1-19.gsfc.nasa.gov|99|
|evansg.mayo.edu|99|
|aragorn194.acns.nwu.edu|99|
|205.205.28.115|99|
|205.138.102.52|99|
|204.243.98.13|99|
|192.216.64.153|99|
|169.152.79.3|99|
|163.205.130.3|99|
|159.56.28.33|99|
|144.163.221.54|99|
|143.108.39.120|99|
|134.57.49.174|99|
|132.201.194.214|99|
|130.69.100.12|99|
|129.59.151.60|99|
|128.227.242.135|99|
|128.159.123.21|99|
|128.158.44.162|99|
|128.149.9.161|99|
|whopkins.sso.az.honeywell.com|984|
|yen.isltd.insignia.com|98|
|saxton.lsis.loral.com|98|
|ppp035-mfld.wis.com|98|
|pm2_16.digital.net|98|
|mocha.ee.pitt.edu|98|
|mac-dah.dsc.com|98|
|lgbppp29.uni-c.dk|98|
|ix-den13-03.ix.netcom.com|98|
|hill009-2.rutgers.edu|98|
|gustavc.gsfc.nasa.gov|98|
|greed.convex.com|98|
|gate.cfe.gob.mx|98|
|cygx3.usno.navy.mil|98|
|cobbbcb.gtri.gatech.edu|98|
|204.183.158.194|98|
|199.171.164.6|98|
|198.76.200.3|98|
|198.60.30.49|98|
|192.88.242.164|98|
|129.50.20.10|98|
|128.159.111.209|98|
|128.158.57.20|98|
|utglas.csr.utexas.edu|97|
|unet8.cmact.com|97|
|ufark10.chem.ufl.edu|97|
|uakombone-pvt-far.uakom.sk|97|
|trothermel.eng.gulfaero.com|97|
|su1218.mathematik.uni-marburg.de|97|
|pipe3.h1.usa.pipeline.com|97|
|onb2.bc.edu|97|
|n1374319.ksc.nasa.gov|97|
|n1142703.ksc.nasa.gov|97|
|mos.hskiij.hitachi-sk.co.jp|97|
|mbs-r1-d01.mbs.net|97|
|mac_8.datadesign.se|97|
|kayleigh.cs.man.ac.uk|97|
|f-umbc8.umbc.edu|97|
|dicifw01.dic.co.jp|97|
|ddt.wri.com|97|
|adeskgate.autodesk.com|97|
|193.42.224.32|97|
|163.206.130.64|97|
|163.205.18.228|97|
|134.152.52.82|97|
|133.11.1.82|97|
|130.74.176.41|97|
|128.217.62.38|97|
|128.159.148.19|97|
|128.159.140.59|97|
|news.dfrc.nasa.gov|966|
|voice.ece.jhu.edu|96|
|van13383.direct.ca|96|
|smf-n14.facsmf.utexas.edu|96|
|sailqa.jsc.nasa.gov|96|
|romeo.rdyne.rockwell.com|96|
|peewee.irm.fau.edu|96|
|pc33ben.stflabs.okstate.edu|96|
|pc023.kayser-threde.de|96|
|neptune.convex.com|96|
|nasdard.hq.nasda.go.jp|96|
|n1127400.ksc.nasa.gov|96|
|n1123983.ksc.nasa.gov|96|
|n1031571.ksc.nasa.gov|96|
|m35958.ksc.nasa.gov|96|
|dmccoy.jsc.nasa.gov|96|
|dewey.arc.nasa.gov|96|

## 统计访问来源主机TOP 100 IP和分别对应出现的总次数

|IP|count|
|:---:|:---:|
|205.205.28.115|99|
|205.138.102.52|99|
|204.243.98.13|99|
|192.216.64.153|99|
|169.152.79.3|99|
|163.205.130.3|99|
|159.56.28.33|99|
|144.163.221.54|99|
|143.108.39.120|99|
|134.57.49.174|99|
|132.201.194.214|99|
|130.69.100.12|99|
|129.59.151.60|99|
|128.227.242.135|99|
|128.159.123.21|99|
|128.158.44.162|99|
|128.149.9.161|99|
|204.183.158.194|98|
|199.171.164.6|98|
|198.76.200.3|98|
|198.60.30.49|98|
|192.88.242.164|98|
|129.50.20.10|98|
|128.159.111.209|98|
|128.158.57.20|98|
|193.42.224.32|97|
|163.206.130.64|97|
|163.205.18.228|97|
|134.152.52.82|97|
|133.11.1.82|97|
|130.74.176.41|97|
|128.217.62.38|97|
|128.159.148.19|97|
|128.159.140.59|97|
|204.156.136.8|96|
|163.205.2.11|96|
|163.205.12.112|96|
|128.217.61.8|96|
|204.157.9.29|95|
|203.16.174.5|95|
|198.60.30.14|95|
|194.71.87.13|95|
|155.178.194.177|95|
|141.209.109.22|95|
|139.169.64.93|95|
|128.217.61.18|95|
|128.159.122.110|949|
|204.210.255.16|94|
|161.122.33.58|94|
|141.142.12.168|94|
|141.102.80.134|94|
|134.57.5.120|94|
|134.39.70.204|94|
|130.207.84.71|94|
|204.120.67.134|93|
|204.101.85.101|93|
|192.234.128.93|93|
|141.233.130.55|93|
|140.171.18.158|93|
|138.200.189.91|93|
|134.67.41.20|93|
|132.25.240.182|93|
|128.159.137.37|93|
|204.71.35.4|92|
|163.206.150.68|92|
|161.226.66.90|92|
|152.3.31.45|92|
|204.168.105.39|91|
|160.205.60.58|91|
|142.12.9.52|91|
|134.117.21.44|91|
|130.74.166.32|91|
|130.184.8.219|91|
|128.159.129.38|91|
|128.102.143.192|91|
|205.216.162.12|90|
|204.97.161.185|90|
|204.71.173.6|90|
|198.213.130.40|90|
|163.205.2.156|90|
|163.205.180.55|90|
|163.205.150.20|90|
|163.205.105.48|90|
|150.231.6.231|90|
|147.74.110.94|90|
|143.107.192.123|90|
|136.177.100.104|90|
|129.237.176.123|90|
|128.159.154.142|90|
|128.159.135.37|90|
|128.159.117.33|90|
|38.12.4.107|9|
|38.12.121.99|9|
|38.12.121.97|9|
|38.12.121.81|9|
|38.12.121.60|9|
|38.12.121.50|9|
|38.12.121.229|9|
|38.12.121.217|9|

## 统计最频繁被访问的URL TOP 100

|/images/NASA-logosmall.gif|97410|
|:---:|:---:|
|/images/KSC-logosmall.gif|75337|
|/images/MOSAIC-logosmall.gif|67448|
|/images/USA-logosmall.gif|67068|
|/images/WORLD-logosmall.gif|66444|
|/images/ksclogo-medium.gif|62778|
|/ksc.html|43687|
|/history/apollo/images/apollo-logo1.gif|37826|
|/images/launch-logo.gif|35138|
|/|30346|
|/images/ksclogosmall.gif|27810|
|/shuttle/missions/sts-69/mission-sts-69.html|24606|
|/shuttle/countdown/|24461|
|/shuttle/missions/sts-69/count69.gif|24383|
|/shuttle/missions/sts-69/sts-69-patch-small.gif|23405|
|/shuttle/missions/missions.html|22453|
|/images/launchmedium.gif|19877|
|/htbin/cdt_main.pl|17247|
|/shuttle/countdown/images/countclock.gif|12160|
|/icons/menu.xbm|12137|
|/icons/blank.xbm|12057|
|/software/winvn/winvn.html|10345|
|/icons/image.xbm|10308|
|/history/history.html|10134|
|/history/apollo/images/footprint-logo.gif|10126|
|/history/apollo/images/apollo-small.gif|9439|
|/history/apollo/images/footprint-small.gif|9230|
|/software/winvn/winvn.gif|9037|
|/history/apollo/apollo.html|8985|
|/software/winvn/wvsmall.gif|8662|
|/software/winvn/bluemarb.gif|8610|
|/htbin/cdt_clock.pl|8583|
|/shuttle/countdown/liftoff.html|7865|
|/shuttle/resources/orbiters/orbiters-logo.gif|7389|
|/images/shuttle-patch-logo.gif|7261|
|/history/apollo/apollo-13/apollo-13.html|7177|
|/images/|7040|
|/shuttle/countdown/video/livevideo2.gif|7029|
|/images/kscmap-tiny.gif|6615|
|/shuttle/technology/sts-newsref/stsref-toc.html|6517|
|/history/apollo/apollo-13/apollo-13-patch-small.gif|6309|
|/shuttle/missions/sts-71/sts-71-patch-small.gif|5613|
|/shuttle/missions/sts-69/images/images.html|5264|
|/icons/text.xbm|5248|
|/images/construct.gif|5093|
|/images/shuttle-patch-small.gif|4869|
|/shuttle/missions/sts-69/movies/movies.html|4846|
|/shuttle/missions/sts-70/sts-70-patch-small.gif|4791|
|/icons/unknown.xbm|4785|
|/shuttle/missions/sts-69/liftoff.html|4559|
|/facilities/lc39a.html|4464|
|/shuttle/resources/orbiters/endeavour.html|4434|
|/history/apollo/images/apollo-logo.gif|4365|
|/shuttle/missions/sts-70/mission-sts-70.html|4066|
|/images/lc39a-logo.gif|4024|
|/shuttle/resources/orbiters/endeavour-logo.gif|3817|
|/shuttle/technology/sts-newsref/sts_asm.html|3706|
|/shuttle/countdown/countdown.html|3518|
|/shuttle/missions/sts-71/movies/movies.html|3507|
|/shuttle/countdown/video/livevideo.jpeg|3377|
|/history/apollo/apollo-11/apollo-11.html|3140|
|/shuttle/missions/sts-71/mission-sts-71.html|3130|
|/shuttle/missions/sts-70/images/images.html|3087|
|/shuttle/missions/sts-71/images/images.html|2945|
|/shuttle/missions/sts-73/mission-sts-73.html|2939|
|/images/faq.gif|2865|
|/shuttle/technology/images/srb_mod_compare_1-small.gif|2864|
|/shuttle/technology/images/srb_mod_compare_3-small.gif|2818|
|/shuttle/technology/images/srb_mod_compare_6-small.gif|2715|
|/history/apollo/apollo-11/apollo-11-patch-small.gif|2701|
|/elv/elvpage.htm|2586|
|/shuttle/missions/sts-73/sts-73-patch-small.gif|2544|
|/shuttle/countdown/video/sts-69-prelaunch-pad.gif|2385|
|/shuttle/missions/51-l/mission-51-l.html|2343|
|/images/launch-small.gif|2293|
|/facilities/tour.html|2256|
|/shuttle/missions/51-l/51-l-patch-small.gif|2201|
|/images/kscmap-small.gif|2172|
|/shuttle/resources/orbiters/challenger.html|2171|
|/shuttle/missions/sts-71/movies/sts-71-launch.mpg|2159|
|/shuttle/technology/sts-newsref/sts-lcc.html|2146|
|/htbin/wais.pl|2133|
|/facts/about_ksc.html|2120|
|/history/mercury/mercury.html|2107|
|/images/mercury-logo.gif|2040|
|/elv/elvhead3.gif|1991|
|/images/launchpalms-small.gif|1979|
|/images/whatsnew.gif|1936|
|/history/apollo/apollo-spacecraft.txt|1929|
|/facilities/vab.html|1915|
|/shuttle/resources/orbiters/columbia.html|1912|
|/shuttle/countdown/lps/fr.html|1908|
|/shuttle/resources/orbiters/challenger-logo.gif|1904|
|/images/ksclogo.gif|1892|
|/whats-new.html|1891|
|/elv/endball.gif|1874|
|/history/apollo/apollo-13/apollo-13-info.html|1869|
|/shuttle/missions/sts-74/mission-sts-74.html|1868|
|/elv/PEGASUS/minpeg1.gif|1845|
|/elv/SCOUT/scout.gif|1835|

## 统计不同响应状态码的出现次数和对应百分比

referer,count,percentage
302,26497,1.68783%
0,1,0.00006%
304,134146,8.54495%
403,171,0.01089%
200,1398987,89.11387%
404,10055,0.64049%
500,3,0.00019%
501,27,0.00172%

## 分别统计不同4XX状态码对应的TOP 10 URL和对应出现的总次数

|referer|url|count|
|:---:|:---:|:---:|
|403|/software/winvn/winvn.html/wvsmall.gif|32|
|403|/software/winvn/winvn.html/winvn.gif|32|
|403|/software/winvn/winvn.html/bluemarb.gif|32|
|403|/ksc.html/images/ksclogo-medium.gif|12|
|403|/ksc.html/images/WORLD-logosmall.gif|10|
|403|/ksc.html/images/USA-logosmall.gif|10|
|403|/ksc.html/images/NASA-logosmall.gif|10|
|403|/ksc.html/images/MOSAIC-logosmall.gif|10|
|403|/ksc.html/facts/about_ksc.html|5|
|403|/ksc.html/shuttle/missions/missions.html|4|
|404|/pub/winvn/readme.txt|1337|
|404|/pub/winvn/release.txt|1185|
|404|/shuttle/missions/STS-69/mission-STS-69.html|683|
|404|/images/nasa-logo.gif|319|
|404|/shuttle/missions/sts-68/ksc-upclose.gif|253|
|404|/elv/DELTA/uncons.htm|209|
|404|/history/apollo/sa-1/sa-1-patch-small.gif|200|
|404|/://spacelink.msfc.nasa.gov|166|
|404|/images/crawlerway-logo.gif|160|
|404|/history/apollo/a-001/a-001-patch-small.gif|154|

## 给定URL输出TOP 100访问来源主机

|host|count|
|:---:|:---:|
|piweba5y.prodigy.com|126|
|piweba4y.prodigy.com|124|
|piweba3y.prodigy.com|111|
|news.ti.com|69|
|mpngate1.ny.us.ibm.net|69|
|www-c5.proxy.aol.com|66|
|webgate1.mot.com|66|
|www-d1.proxy.aol.com|62|
|www-b2.proxy.aol.com|62|
|poppy.hensa.ac.uk|60|
|www-d4.proxy.aol.com|59|
|www-d2.proxy.aol.com|59|
|www-b3.proxy.aol.com|57|
|pc24.ac.tandem.com|57|
|e659229.boeing.com|57|
|www-c3.proxy.aol.com|55|
|www-b4.proxy.aol.com|53|
|www-d3.proxy.aol.com|52|
|www-b5.proxy.aol.com|52|
|www-a2.proxy.aol.com|52|
|www-c2.proxy.aol.com|49|
|www-c6.proxy.aol.com|48|
|www-a1.proxy.aol.com|48|
|intgate.raleigh.ibm.com|47|
|www-c4.proxy.aol.com|46|
|www-c1.proxy.aol.com|45|
|vagrant.vf.mmc.com|45|
|sgigate.sgi.com|41|
|163.206.89.4|39|
|whopkins.sso.az.honeywell.com|38|
|199.1.50.225|38|
|palona1.cns.hp.com|36|
|koriel.sun.com|35|
|www-relay.pa-x.dec.com|34|
|gw2.att.com|34|
|cliffy.lfwc.lockheed.com|34|
|206.27.25.1|33|
|www-proxy.crl.research.digital.com|31|
|piweba2y.prodigy.com|31|
|gw3.att.com|30|
|piweba1y.prodigy.com|28|
|204.161.9.51|26|
|trusty.lmsc.lockheed.com|25|
|proxy.bellatlantic.com|25|
|interlock.turner.com|25|
|sahp315.sandia.gov|24|
|keyhole.es.dupont.com|24|
|pcrb.ccrs.emr.ca|23|
|gw1.att.com|22|
|metabelis.rmit.edu.au|21|
|igate.uswest.com|21|
|n1043372.ksc.nasa.gov|20|
|bstfirewall.bst.bls.com|20|
|gn2.getnet.com|19|
|dicifw01.dic.co.jp|19|
|corpgate.nt.com|18|
|198.164.3.27|18|
|nntp1.reach.com|17|
|198.83.19.44|17|
|tiber.gsfc.nasa.gov|16|
|stortek1.stortek.com|16|
|lamar.d48.lilly.com|16|
|faith.waikato.ac.nz|16|
|proxy.austin.ibm.com|15|
|n1032154.ksc.nasa.gov|15|
|magicall.dacom.co.kr|15|
|jericho3.microsoft.com|15|
|hpcvsop.cv.hp.com|15|
|heimdallp2.compaq.com|15|
|gatekeeper.ray.com|15|
|bocagate.bocaraton.ibm.com|15|
|beta.xerox.com|15|
|bbuig150.unisys.com|15|
|204.30.14.10|15|
|160.205.119.27|15|
|unexlab9.ucr.edu|14|
|relay02.jpmorgan.com|14|
|orpheus.amdahl.com|14|
|neuron.bms.com|14|
|duckling.omsi.edu|14|
|bettong.client.uq.oz.au|14|
|beavis.b11.ingr.com|14|
|wwwproxy.sanders.com|13|
|www-e1b.gnn.com|13|
|web.kyoto-inet.or.jp|13|
|spider.tbe.com|13|
|nirvana1.ultranet.com|13|
|miriworld.its.unimelb.edu.au|13|
|inet2.tek.com|13|
|gw4.att.com|13|
|ftp-relay.mv.us.adobe.com|13|
|152.163.192.5|13|
|www-e1a.gnn.com|12|
|www-b6.proxy.aol.com|12|
|ottgate2.bnr.ca|12|
|edams.ksc.nasa.gov|12|
|disarray.demon.co.uk|12|
|amdext.amd.com|12|
|199.93.170.212|12|
|163.206.137.21|12|
