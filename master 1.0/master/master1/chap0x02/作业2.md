# 第二章：linux服务器系统使用基础（实验）

---

## 一、实验环境

---

- VirtualBox 6.1

- Ubuntu 20.04.02 Server 64bit

- [阿里云云起实验室](   )


- [asciinema](https://asciinema.org/) 

---

## 二、实验问题

---

- 使用表格方式记录至少 2 个不同 Linux 发行版本上以下信息的获取方法，使用 [asciinema](https://asciinema.org/) 录屏方式「分段」记录相关信息的获取过程和结果

- 【软件包管理】在目标发行版上安装` tmux `和 `tshark` ；查看这 2 个软件被安装到哪些路径；卸载 `tshark` ；验证` tshark` 卸载结果

- 【文件管理】复制以下代码到终端运行，在目标 Linux 发行版系统中构造测试数据集，然后回答以下问题：

   ```
    cd /tmp && for i in $(seq 0 1024);do dir="test-$RANDOM";mkdir "$dir";echo "$RANDOM" > "$dir/$dir-$RANDOM";done
   ```

  - 找到 `/tmp` 目录及其所有子目录下，文件名包含 `666` 的所有文件
  - 找到 `/tmp` 目录及其所有子目录下，文件内容包含 `666` 的所有文件

- 【文件压缩与解压缩】练习课件中 [文件压缩与解压缩](https://c4pr1c3.github.io/LinuxSysAdmin/chap0x02.md.html#/12/1) 一节所有提到的压缩与解压缩命令的使用方法

- 【跟练】 [子进程管理实验](https://asciinema.org/a/f3ux5ogwbxwo2q0wxxd0hmn54)

- 【硬件信息获取】目标系统的 CPU、内存大小、硬盘数量与硬盘容量

---

## 三、实验步骤

---

### 1、在 asciinema 注册一个账号，并在本地安装配置好asciinema

---

- ubuntu20.04上实验

配置代码：

```
sudo apt-add-repository ppa:zanchey/asciinema
sudo apt-get update
sudo apt-get install asciinema
asciinema auth
```
实验截图：

![asc_login](img/asc_login.png)

- 阿里云平台（CentOS）上实验

配置代码：

```
yum install -y  asciinema
asciinema auth
asciinema rec
```

实验截图：

![cen](img/cen.png)
---

### 2、【软件包管理】在目标发行版上安装` tmux `和 `tshark` ；查看这 2 个软件被安装到哪些路径；卸载 `tshark` ；验证` tshark` 卸载结果

---

- Ubuntu20.04上实验

实验代码：

```
sudo apt install tmux #安装tmux
which tmux #查看tmux安装路径
sudo apt-get install tshark #安装tshark
which tshark	#查看tshark安装路径
sudo apt-get remove --purge tshark # 卸载tshark软件包
```

安装并查看`tmux`：

[![asciicast](https://asciinema.org/a/pPb7ndk0rxw0G2OWdxTnyqijv.svg)](https://asciinema.org/a/pPb7ndk0rxw0G2OWdxTnyqijv)

安装查看卸载`tshark`:

[![asciicast](https://asciinema.org/a/TFYWCvZLVhZ0wMkQW0N230J2w.svg)](https://asciinema.org/a/TFYWCvZLVhZ0wMkQW0N230J2w)

- 阿里云平台（CentOS）上实验

实验代码：
```
yum install tmux
which tmux
yum install wireshark
which tshark
yum -y remove wireshark
which tshark
```

实验过程：

[![asciicast](https://asciinema.org/a/yOVGEVHvyQNOZ1iJVZwzMvvY3.svg)](https://asciinema.org/a/yOVGEVHvyQNOZ1iJVZwzMvvY3)

---

### 3、【文件管理】复制以下代码到终端运行，在目标 Linux 发行版系统中构造测试数据集，然后回答以下问题：

   ```
    cd /tmp && for i in $(seq 0 1024);do dir="test-$RANDOM";mkdir "$dir";echo "$RANDOM" > "$dir/$dir-$RANDOM";done
   ```

  - 找到 `/tmp` 目录及其所有子目录下，文件名包含 `666` 的所有文件
  - 找到 `/tmp` 目录及其所有子目录下，文件内容包含 `666` 的所有文件

---

- Ubuntu20.04上实验

实验代码：
```
sudo find ./ -type f -name "*666*"  #找到 `/tmp` 目录及其所有子目录下，文件名包含 `666` 的所有文件

grep -r "666" ./  #找到 `/tmp` 目录及其所有子目录下，文件内容包含 `666` 的所有文件

```
实验过程：

[![asciicast](https://asciinema.org/a/HDkSiY2xlPwwqZQ0jQayszV82.svg)](https://asciinema.org/a/HDkSiY2xlPwwqZQ0jQayszV82)

- 阿里云平台（CentOS）上实验

实验代码：
```
cd /tmp && for i in $(seq 0 1024);do dir="test-$RANDOM";mkdir "$dir";echo "$RANDOM" > "$dir/$dir-$RANDOM";done

cd /tmp

sudo find ./ -name '*666*'

sudo grep -r '666' ./
```

实验过程：

[![asciicast](https://asciinema.org/a/MT73gpSBswPPSLWnbNtD15k2p.svg)](https://asciinema.org/a/MT73gpSBswPPSLWnbNtD15k2p)

---

### 4、【文件压缩与解压缩】练习课件中 [文件压缩与解压缩](https://c4pr1c3.github.io/LinuxSysAdmin/chap0x02.md.html#/12/1) 一节所有提到的压缩与解压缩命令的使用方法

---

- Ubuntu20.04上实验

实验代码：

```
#创建文件

# gzip:

gzip test.txt 
gzip -d test.txt.gz

# bzip2

bzip2 -z test.txt
bzip2 -d test.txt.bz2

# zip

zip test.txt.zip /tmp
unzip test.txt.zip

# tar

tar -czvf test.tar test.txt
tar -xzvf test.tar

# 7z

7za a test.7z /test.txt
7za x test.7z
```

实验过程：

[![asciicast](https://asciinema.org/a/BzgXTQfRM2tNWT3cDC9Nc8VpU.svg)](https://asciinema.org/a/BzgXTQfRM2tNWT3cDC9Nc8VpU)

- 阿里云平台（CentOS）上实验

实验代码：
```
# gzip:

gzip test.txt 
gzip -d test.txt.gz

# bzip2

bzip2 -z test.txt
bzip2 -d test.txt.bz2

# zip

zip test.txt.zip /tmp
unzip test.txt.zip

# tar

tar -czvf test.tar test.txt
tar -xzvf test.tar

# 7z

7za a test.7z /test.txt
7za x test.7z
```

实验过程：

[![asciicast](https://asciinema.org/a/vfp6KTahqDyXYjcgPvL7BcrSF.svg)](https://asciinema.org/a/vfp6KTahqDyXYjcgPvL7BcrSF)

--- 

### 5、*【跟练】 [子进程管理实验](https://asciinema.org/a/f3ux5ogwbxwo2q0wxxd0hmn54)   *

---

- Ubuntu20.04上实验

[![asciicast](https://asciinema.org/a/k7RbquekrKe3ecefjq8KFc1bk.svg)](https://asciinema.org/a/k7RbquekrKe3ecefjq8KFc1bk)

- 阿里云平台（CentOS）上实验

[![asciicast](https://asciinema.org/a/A3iScQWX6jTRsQJX11GAq8ZR6.svg)](https://asciinema.org/a/A3iScQWX6jTRsQJX11GAq8ZR6)
--- 


### 6、【硬件信息获取】目标系统的 CPU、内存大小、硬盘数量与硬盘容量

---

- Ubuntu20.04上实验

实验代码：
```
cat /proc/cpuinfo  # 获取CPU信息
free -h #获取内存信息 
df -h #获取硬盘数量以及容量信息
```

实验过程：

[![asciicast](https://asciinema.org/a/7SvDif8nJjmhMLRPqFCKlOfkp.svg)](https://asciinema.org/a/7SvDif8nJjmhMLRPqFCKlOfkp)

- 阿里云平台（CentOS）上实验

实验代码：
```
cat /proc/cpuinfo  # 获取CPU信息
free -h #获取内存信息 
df -h #获取硬盘数量以及容量信息
```

实验过程：

[![asciicast](https://asciinema.org/a/ppxQHr5ecGaNzqEioaJfqoWxM.svg)](https://asciinema.org/a/ppxQHr5ecGaNzqEioaJfqoWxM)
---

### 7、使用表格方式记录至少 2 个不同 Linux 发行版本上以上信息的获取方法

---
|       版本号       | `ubuntu 20.04` | `CentOS 7.7` |
| :---------------: | :----------: |   :----:         |
|        安装        |     `sudo apt install XXX`         | `yum install xxx` |
|      安装路径      | `which XXX` | `which xxx` |
|        卸载        | `sudo apt-get remove --purge XXX` | `yum -y remove xxx` |
| 找特定文件名的文件 | `sudo find ./ -name '*XXX*'` | `sudo find ./ -name '*XXX*` |
|  找特定内容的文件  | `sudo grep -r 'XXX' ./` | `sudo grep -r 'XXX' ./` |
|     gzip的压缩与解压缩     |     `gzip test.txt` and `gzip -d test.txt.gz`     |    `gzip test.txt` and `gzip -d test.txt.gz` |
| bzip2的压缩与解压缩|`bzip2 -z test.txt`and`bzip2 -d test.txt.bz2`|`bzip2 -z test.txt`and`bzip2 -d test.txt.bz2`|
|zip的压缩与解压缩|`zip test.txt.zip /tmp`and`unzip test.txt.zip`|`zip test.txt.zip /tmp`and`unzip test.txt.zip`|
|tar的压缩与解压缩|`tar -czvf test.tar test.txt`and`tar -xzvf test.tar`|`tar -czvf test.tar test.txt`and`tar -xzvf test.tar`|
|7z的压缩与解压缩|`7za a test.7z /test.txt`and`7za x test.7z`|`7za a test.7z /test.txt`and`7za x test.7z`|
|    CPU信息获取     | `cat /proc/cpuinfo` | `cat /proc/cpuinfo` |
|      内存大小      | `free -h` | `free -h` |
|      硬盘数量以及容量      | `df -h/ lsblk` | `df -h/ lsblk` |


---

## 四、我遇到的问题

---
- 第一个录制的视频忘记命名了，导致第一个视频的名字为untitle,争取第二个注意。
- 在后续中，使用了描述中的第二个网址进入到了编辑界面，可以更改文件名。
- 第一次安装时忘记录屏了，卸载后重新下载时，没有第一次安装时详细的数据，猜测是没卸载干净。
- 第五个问题跟练时，ping www.baidu.com & 后难以终止，就关闭了页面。
- 云平台缺失7z压缩的相关文件，找了很多方法都没有下载好，导致该次压缩与解压缩失败了。
---

## 五、参考文献

---

- [Debian 7za: command not found](https://shipengliang.com/program-code/debian-7za-command-not-found.html)
- [Linux：-bash: unzip: command not found](https://blog.csdn.net/yongpole/article/details/82775802)
- [bunzip2: command not found](https://blog.csdn.net/chengyuqiang/article/details/78165878)